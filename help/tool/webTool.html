<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../src/img/tool/crop.png">
    <title>What Is My Viewport</title>
    <style>
        body {
            background: #333;
            font-family: Arial, 'Microsoft JhengHei', sans-serif;
            padding: 0px;
            margin: 0px;
        }
        .browser-develop{
            position: fixed;
            left:20px;
            bottom: 20px;
            padding: 20px 30px;
            margin: 0px;
            list-style: none;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0,0,0,.3);
            background: #ededed;
        }
        .viewport {
            max-width: 480px;
            min-height: 100vh;
            padding: 10px 20px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #fff;
        }
        .viewport_main{
            width: 100%;
            flex-basis: 100%;
            text-align: center;
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid #666
        }
        .title{
            font-size: 50px;
            margin-bottom: 25px;
        }
        .document-size{
            font-size: 60px;
            font-weight: bold;
        }
        .viewport_other{
            width: 100%;
            flex-basis: 100%;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        .viewport_info{
            display: flex;
            align-items: center;
        }
        .browser{
            margin-right: 25px;
        }
        .dpr{
            display: flex;
        }
        .dpr_title{
            margin-right: 8px;
        }
        .screen_title{
            margin-bottom: 8px;
        }
        .screen_size{}
        @media (max-width: 600px) {
            .title{ font-size: 20px; }
            .document-size{ font-size: 30px; }
            .viewport_other{
                flex-direction: column;
                align-items: center;
            }
            .viewport_info{
                flex-direction: column;
                margin-bottom: 5px;
            }
            .browser{ 
                margin-right: 0px; 
                margin-bottom: 5px;
            }
            .viewport_screen{
                display: flex;
                align-items: center;
            }
            .screen_title{
                margin-bottom: 0px;
                margin-right: 6px;
            }
        }
    </style>
</head>
<body>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js' integrity='sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==' crossorigin='anonymous'></script>
    <script>
        (function () {

            "use strict";

            function uaMatch(ua) {
                if (ua === undefined) {
                    ua = window.navigator.userAgent;
                }
                ua = ua.toLowerCase();
                var match = /(edge)\/([\w.]+)/.exec(ua) ||
                    /(opr)[\/]([\w.]+)/.exec(ua) ||
                    /(chrome)[ \/]([\w.]+)/.exec(ua) ||
                    /(iemobile)[\/]([\w.]+)/.exec(ua) ||
                    /(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua) ||
                    /(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua) ||
                    /(webkit)[ \/]([\w.]+)/.exec(ua) ||
                    /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua) ||
                    /(msie) ([\w.]+)/.exec(ua) ||
                    ua.indexOf("trident") >= 0 && /(rv)(?::| )([\w.]+)/.exec(ua) ||
                    ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua) ||
                    [];
                var platform_match = /(ipad)/.exec(ua) ||
                    /(ipod)/.exec(ua) ||
                    /(windows phone)/.exec(ua) ||
                    /(iphone)/.exec(ua) ||
                    /(kindle)/.exec(ua) ||
                    /(silk)/.exec(ua) |
                    /(android)/.exec(ua) ||
                    /(win)/.exec(ua) ||
                    /(mac)/.exec(ua) ||
                    /(linux)/.exec(ua) ||
                    /(cros)/.exec(ua) ||
                    /(playbook)/.exec(ua) ||
                    /(bb)/.exec(ua) ||
                    /(blackberry)/.exec(ua) ||
                    [];
                var browser = {},
                    matched = {
                        browser: match[5] || match[3] || match[1] || "",
                        version: match[2] || match[4] || "0",
                        versionNumber: match[4] || match[2] || "0",
                        platform: platform_match[0] || ""
                    };
                if (matched.browser) {
                    browser[matched.browser] = true;
                    browser.version = matched.version;
                    browser.versionNumber = parseInt(matched.versionNumber, 10);
                }
                if (matched.platform) {
                    browser[matched.platform] = true;
                }
                if (browser.android || browser.bb || browser.blackberry || browser.ipad || browser.iphone ||
                    browser.ipod || browser.kindle || browser.playbook || browser.silk || browser["windows phone"]) {
                    browser.mobile = true;
                }
                if (browser.cros || browser.mac || browser.linux || browser.win) {
                    browser.desktop = true;
                }
                if (browser.chrome || browser.opr || browser.safari) {
                    browser.webkit = true;
                }
                if (browser.chrome) {
                    var chrome = "Chrome"
                    matched.browser = chrome
                    browser[chrome] = true;
                }
                if (browser.msie) {
                    var ie = "IE";
                    matched.browser = ie;
                    browser[ie] = true;
                }
                if (browser.rv || browser.iemobile) {
                    var ie = "IE";
                    matched.browser = ie;
                    browser[ie] = true;
                }
                if (browser.edge) {
                    delete browser.edge;
                    var msedge = "Edge";
                    matched.browser = msedge;
                    browser[msedge] = true;
                }
                if (browser.safari && browser.blackberry) {
                    var blackberry = "blackberry";
                    matched.browser = blackberry;
                    browser[blackberry] = true;
                }
                if (browser.safari && browser.playbook) {
                    var playbook = "playbook";
                    matched.browser = playbook;
                    browser[playbook] = true;
                }
                if (browser.bb) {
                    var bb = "blackberry";
                    matched.browser = bb;
                    browser[bb] = true;
                }
                if (browser.opr) {
                    var opera = "Opera";
                    matched.browser = opera;
                    browser[opera] = true;
                }
                if (browser.safari && browser.android) {
                    var android = "Android";
                    matched.browser = android;
                    browser[android] = true;
                }
                if (browser.safari && browser.kindle) {
                    var kindle = "kindle";
                    matched.browser = kindle;
                    browser[kindle] = true;
                }
                if (browser.safari && browser.silk) {
                    var silk = "silk";
                    matched.browser = silk;
                    browser[silk] = true;
                }
                browser.name = matched.browser;
                browser.platform = matched.platform;
                return browser;
            }
            window.Browser = uaMatch(window.navigator.userAgent);
            return window.Browser;
        })();
        ;(function (Browser) {
            var url = location.href
            function runWebTool() {
                function catchSize() {
                    var showWidth = document.documentElement.clientWidth
                    var showHeight = document.documentElement.clientHeight
                    var newWidth = window.screen.width
                    var newHeight = window.screen.height
                    var newDPR = window.devicePixelRatio.toFixed(2);

                    documentSizeDiv.innerText = showWidth + 'px × ' + showHeight + 'px'
                    screenSizeDiv.innerText = newWidth + 'px ×' + newHeight + 'px'
                    devDPR.innerText = newDPR
                }
                var mainDiv = document.createElement('div')

                var documentSizeMainDiv = document.createElement('div')
                var documentSizeTitle = document.createElement('div')
                var documentSizeDiv = document.createElement('div')

                var otherDiv = document.createElement('div')
                var otherLeftDiv = document.createElement('div')
                var otherRightDiv = document.createElement('div')

                var browser = document.createElement('div')

                var devMainDiv = document.createElement('div')
                var devDPRTitle = document.createElement('div')
                var devDPR = document.createElement('div')

                var screenSizeMainDiv = document.createElement('div')
                var screenSizeTitle = document.createElement('div')
                var screenSizeDiv = document.createElement('div')
                // mainDiv.setAttribute('style',
                //     [
                //         'font-family: 微軟正黑體',
                //         'border-radius: 5px',
                //         'background-color: rgba(0, 0, 0, 0.3)',
                //         'position: fixed',
                //         'top: 30px',
                //         'right: 30px',
                //         'font-size: 14px',
                //         'color: white',
                //         'padding: 10px',
                //         'border-radius: 5px',
                //         'z-index: 9999999',
                //         'box-shadow: 0 0 5px rgba(white,0.5)',
                //         'user-select: none',
                //         'cursor: pointer'
                //     ].join(';')
                // )

                // innerText
                documentSizeTitle.innerText = 'your viewport size is:'

                browser.innerText = Browser.name + ' ( ' + Browser.version + ' ) '

                screenSizeTitle.innerText = 'Screen Size : '

                devDPRTitle.innerText = 'DPR : '

                mainDiv.addEventListener('click', function () {
                })
                catchSize()

                // class
                mainDiv.classList.add('viewport');

                documentSizeMainDiv.classList.add('viewport_main')
                documentSizeTitle.classList.add('title')
                documentSizeDiv.classList.add('document-size')

                otherDiv.classList.add('viewport_other')
                otherLeftDiv.classList.add('viewport_info')
                browser.classList.add('browser')
                devMainDiv.classList.add('dpr')
                devDPRTitle.classList.add('dpr_title')
                devDPR.classList.add('dpr_number')
                otherRightDiv.classList.add('viewport_screen')
                screenSizeTitle.classList.add('screen_title')
                screenSizeDiv.classList.add('screen_size')

                // HTML layout
                documentSizeMainDiv.appendChild(documentSizeTitle)
                documentSizeMainDiv.appendChild(documentSizeDiv)
                mainDiv.appendChild(documentSizeMainDiv)

                otherLeftDiv.appendChild(browser)
                devMainDiv.appendChild(devDPRTitle)
                devMainDiv.appendChild(devDPR)
                otherLeftDiv.appendChild(devMainDiv)
                otherDiv.appendChild(otherLeftDiv)

                otherRightDiv.appendChild(screenSizeTitle)
                otherRightDiv.appendChild(screenSizeDiv)
                otherDiv.appendChild(otherRightDiv)

                mainDiv.appendChild(otherDiv)

                document.body.appendChild(mainDiv)
                window.addEventListener('resize', catchSize)
            }
            if (url.indexOf('?') !== -1) {
                var urlArray = url.split('?')[1].split('&'),
                    l = urlArray.length
                for (var i = 0; i < l; i++) {
                    var obj = urlArray[i]
                    obj.split('=')[0] === 'webtool' && obj.split('=')[1] === 'true' && runWebTool()
                }
            }

            runWebTool();
        })(window.Browser);

        let info = window.Browser;    
        console.log(info);
        // function ReSize() {
        //     var w = $(window).width();
        //     var h = $(window).height();
        //     $('body').html("<ul class='browser-develop'> \
        //         <li>" + info.name + " " + info.version + "</li> \
        //         <li>width : " + w + "</li> \
        //         <li>height : " + h + "</li> \
        //         </ul>");
        // }
        // ReSize();    

        // $(window).resize(function () {
        //     ReSize();
        // });
    </script>
</body>
</html>